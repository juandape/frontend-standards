# Frontend Standards Checker

Una herramienta escalable y modular para validar est√°ndares de frontend en proyectos JavaScript/TypeScript. **Versi√≥n 0.0.8 con validadores mejorados, mensajes de error enriquecidos y compatibilidad total para React Native. Visualizaci√≥n de reportes en HTML.**

## üöÄ Caracter√≠sticas

- **Arquitectura modular**: Cada componente tiene una responsabilidad espec√≠fica
- **Escalable**: F√°cil agregar nuevas reglas y validadores
- **Configurable**: Configuraci√≥n flexible mediante archivo de configuraci√≥n
- **CLI amigable**: Interfaz de l√≠nea de comandos con opciones detalladas
- **Reportes detallados**: Genera reportes comprensivos con secciones para errors, warnings e info
- **Soporte para monorepos**: Detecta y valida m√∫ltiples zonas autom√°ticamente
- **üÜï Validaci√≥n selectiva**: Opci√≥n `onlyZone` para validar solo m√≥dulos espec√≠ficos
- **üÜï Validaci√≥n eficiente**: Por defecto solo valida archivos en staging para commit (`onlyChangedFiles: true`)
- **üÜï TypeScript nativo**: Tipos estrictos, autocompletado y mejor experiencia de desarrollo
- **üÜï Instalaci√≥n inteligente**: Detecta React Native y adapta la instalaci√≥n autom√°ticamente
- **üÜï Validadores avanzados**: Mensajes de error enriquecidos con n√∫mero de l√≠nea, nombre de carpeta y funci√≥n para reglas clave (ej. coincidencia de nombre de componente)
- **üÜï Mejoras de precisi√≥n**: Validaci√≥n m√°s precisa para componentes, hooks y estructura de carpetas
- **üÜï Comando init**: `frontend-standards-init` para copiar archivos de configuraci√≥n
- **üÜï Soporte para m√∫ltiples entornos**: Configuraci√≥n autom√°tica para diferentes entornos de desarroll
- **üÜï Soporte para React Native**: Configuraci√≥n optimizada para proyectos React Native, incluyendo exclusiones de carpetas nativas y reglas espec√≠ficas
- **üÜï Soporte para Yarn PnP**: Compatible con proyectos que usan Yarn Plug'n'Pla
- **üÜï Soporte para dependencias privadas**: Instalaci√≥n alternativa para proyectos con registries privados
- **üÜï Mejoras de compatibilidad**: Instalaci√≥n robusta para proyectos con dependencias complejas (React Native, monorepos con dependencias privadas)
- **üÜï Mejoras en la documentaci√≥n**: Ejemplos y gu√≠as actualizadas para facilitar la integraci√≥n
- **üÜï Nuevas reglas de validaci√≥n**: Reglas adicionales para mejorar la calidad del c√≥digo
- **üÜï Generaci√≥n de reportes**: Carpeta `logs-standards-validations` para almacenar los reportes generados con fecha y hora y √∫ltimo colaborador que modific√≥ el archivo
- **üÜï Visor html**: Herramienta para visualizar los reportes de validaci√≥n en formato HTML
- **üÜï Exportaci√≥n a CSV**: Posibilidad de exportar los reportes a formato CSV para an√°lisis externo

## üì¶ Instalaci√≥n R√°pida

### Instalaci√≥n est√°ndar (Recomendado)

```bash
# Con Yarn
yarn add --dev frontend-standards-checker@latest

# Con NPM
npm install --save-dev frontend-standards-checker@latest
```

### Scripts en package.json

```json
{
  "scripts": {
    "standards": "frontend-standards-checker",
    "standards:zones": "frontend-standards-checker --zones",
    "standards:verbose": "frontend-standards-checker --verbose",
    "standards:all": "frontend-standards-checker --all",
    "standards:init": "frontend-standards-checker --init"
  }
}
```

**Nota importante:**

- Instala siempre desde npm usando los comandos anteriores.
- No uses tarballs locales ni referencias workspace para evitar errores de instalaci√≥n.

‚ö†Ô∏è **Importante:**

Importa √∫nicamente desde el punto de entrada principal (`frontend-standards-checker`) o desde los m√≥dulos expl√≠citamente exportados en la secci√≥n `exports` de `package.json`.
No importes nunca desde directorios internos como `src/helpers` o `dist/src/helpers`, ya que esto causar√° errores de importaci√≥n de directorios no soportados en Node.js ES Modules.
Si necesitas ampliar la funcionalidad, solicita la exportaci√≥n expl√≠cita del m√≥dulo requerido.

- El paquete incluye todos los archivos necesarios y es compatible con monorepos, Next.js, Vite y React Native.

### Completa la configuraci√≥n tras instalar

```bash
# Ejecuta este comando para agregar el script y actualizar .gitignore autom√°ticamente
npx frontend-standards-checker init
# o
yarn frontend-standards-checker init
```

Esto agregar√° el script `standards` a tu package.json y actualizar√° .gitignore con los archivos relevantes.

## üöÄ Uso R√°pido

### Comandos Principales

```bash
# Validaci√≥n est√°ndar (solo archivos modificados)
yarn standards        # o npm run standards

# Validar zonas espec√≠ficas
yarn standards:zones  # o npm run standards:zones

# Modo verbose (m√°s detalles)
yarn standards:verbose  # o npm run standards:verbose

# Validar TODOS los archivos (no solo modificados)
yarn standards:all    # o npm run standards:all


```

## üìö Documentaci√≥n Completa

**Para configuraci√≥n avanzada, ejemplos pr√°cticos y troubleshooting:**

üëâ **[Ver Gu√≠a Completa de Configuraci√≥n](./checkFrontendStandards.COMPLETE-GUIDE.md)**
üëâ **[Ver Gu√≠a de Instalaci√≥n Detallada](./INSTALL-GUIDE.md)**

La gu√≠a completa incluye:

- ‚úÖ Instalaci√≥n paso a paso (npm y yarn)
- ‚öôÔ∏è Ejemplos de configuraci√≥n para React, Next.js, monorepos
- üîß Configuraci√≥n avanzada de reglas y zonas
- üêõ Troubleshooting y comandos de debug
- üìã Lista completa de validaciones disponibles (60 reglas en total)
- üÜï Configuraci√≥n de `onlyChangedFiles` y `onlyZone`
- üÜï Interacci√≥n entre diferentes opciones de configuraci√≥n
- üÜï Niveles de severidad actualizados (ERROR/WARNING/INFO)

#### Configuraci√≥n simplificada archivo checkFrontendStandards.config.js

```javascript
// checkFrontendStandards.config.js - Configuraci√≥n para React Native
module.exports = {
  zones: { includePackages: false, customZones: ['src'] },
  extensions: ['.js', '.ts', '.jsx', '.tsx'],
  ignorePatterns: ['android', 'ios', 'node_modules'],
  onlyChangedFiles: false, // Validar todos los archivos
  rules: [
    // Reglas personalizadas espec√≠ficas para React Native
  ]
};
```

### Validaci√≥n Eficiente con onlyChangedFiles

Por defecto, la herramienta ahora solo valida archivos que est√°n preparados para commit (staged):

```javascript
// checkFrontendStandards.config.js - Este es el comportamiento predeterminado
export default {
  onlyChangedFiles: true, // Por defecto es true
}
```

Para validar todos los archivos del proyecto:

```bash
# CLI
frontend-standards-checker --only-changed-files=false

# Configuraci√≥n
export default {
  onlyChangedFiles: false
}
```

### Reglas Actualizadas a ERROR

Las siguientes reglas ahora son consideradas errores cr√≠ticos:

- **"No console.log"** - Prohibido el uso de console.log en c√≥digo de producci√≥n
- **"No inline styles"** - Los estilos inline est√°n prohibidos, usar CSS o styled-components

### Validaci√≥n por Zonas

Valida √∫nicamente una zona espec√≠fica, ignorando todas las dem√°s:

```javascript
// Validar solo m√≥dulo de autenticaci√≥n
export default {
  zones: { onlyZone: 'auth' }
};
```

```bash
# Validar zonas espec√≠ficas
./bin/cli.js --zones apps/frontend packages/ui

# Modo verbose (incluye reglas INFO)
./bin/cli.js --verbose

# Saltar validaciones espec√≠ficas
./bin/cli.js --skip-structure --skip-naming

# Configuraci√≥n personalizada
./bin/cli.js --config ./my-config.js --output ./my-report.log
```

### Como m√≥dulo

```javascript
import { FrontendStandardsChecker } from './src/index.js';

const checker = new FrontendStandardsChecker({
  onlyChangedFiles: true, // Por defecto solo archivos en commit
  zones: ['apps/frontend'],
  verbose: true,
  skipStructure: false
});

const results = await checker.run();
console.log(`Found ${results.totalErrors} violations`);
```

### Comando CLI para configuraci√≥n

```bash
# Agregar script y actualizar .gitignore
npx frontend-standards-checker init
# o
yarn frontend-standards-checker init
```

Luego puedes usar:

```bash
yarn standards        # o npm run standards
```

## ‚öôÔ∏è Configuraci√≥n

Crea un archivo `checkFrontendStandards.config.js` en la ra√≠z de tu proyecto:

```javascript
export default {
  // Reglas personalizadas (se agregan a las predeterminadas)
  rules: [
    {
      name: 'Custom rule',
      check: (content) => content.includes('forbidden-pattern'),
      message: 'This pattern is not allowed'
    }
  ],

  // Configuraci√≥n de zonas
  zones: {
    includePackages: true,
    customZones: ['libs', 'tools']
  },

  // Extensiones de archivo a validar
  extensions: ['.js', '.ts', '.jsx', '.tsx'],

  // Patrones a ignorar
  ignorePatterns: [
    'build',
    'dist',
    '*.config.js'
  ]
};
```

### Configuraci√≥n avanzada con funci√≥n

```javascript
export default function(defaultRules) {
  return {
    rules: [
      // Modificar reglas existentes
      ...defaultRules.filter(rule => rule.name !== 'No console.log'),

      // Agregar reglas personalizadas
      {
        name: 'My custom rule',
        check: (content, filePath) => {
          // L√≥gica personalizada
          return content.includes('bad-pattern');
        },
        message: 'Custom validation failed'
      }
    ],

    // Configuraci√≥n adicional
    zones: {
      includePackages: false
    }
  };
}
```

## üîß Configuraci√≥n para React Native

Frontend Standards v4.9.0 incluye configuraci√≥n optimizada para proyectos React Native:

### Archivo de configuraci√≥n recomendado

```javascript
// checkFrontendStandards.config.js
module.exports = {
  // Configuraci√≥n espec√≠fica para React Native
  zones: {
    includePackages: false,
    customZones: ['src'] // Solo validar carpeta src
  },

  // Extensiones de archivo a validar
  extensions: ['.js', '.ts', '.jsx', '.tsx'],

  // Patrones a ignorar espec√≠ficos para React Native
  ignorePatterns: [
    'android',           // C√≥digo nativo Android
    'ios',              // C√≥digo nativo iOS
    'build',
    'dist',
    '*.config.js',      // Archivos de configuraci√≥n
    'metro.config.js',
    'babel.config.js',
    'react-native.config.js',
    '__tests__',
    '.husky',
    '.bundle',
    'node_modules'
  ],

  // Validar todos los archivos, no solo staged
  onlyChangedFiles: false,

  // Reglas personalizadas para React Native
  rules: [
    {
      name: 'React Native - No console.log in production',
      check: (content, filePath) => {
        // Permitir console.log en archivos de desarrollo/debug
        if (filePath.includes('debug') || filePath.includes('dev')) {
          return false;
        }
        return content.includes('console.log');
      },
      message: 'Avoid console.log in production code. Use a proper logging solution for React Native.',
      level: 'ERROR'
    }
  ]
};
```

## üèóÔ∏è Arquitectura

El proyecto est√° estructurado de manera modular:

```
src/
‚îú‚îÄ‚îÄ index.js                 # Clase principal y punto de entrada
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ config-loader.js     # Carga y manejo de configuraci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ project-analyzer.js  # An√°lisis de estructura del proyecto
‚îÇ   ‚îú‚îÄ‚îÄ rule-engine.js       # Motor de validaci√≥n de reglas
‚îÇ   ‚îî‚îÄ‚îÄ reporter.js          # Generaci√≥n de reportes
‚îî‚îÄ‚îÄ utils/
    ‚îú‚îÄ‚îÄ file-scanner.js      # Escaneo y filtrado de archivos
    ‚îî‚îÄ‚îÄ logger.js            # Sistema de logging
```

### Componentes principales

#### FrontendStandardsChecker

La clase principal que orquesta todo el proceso de validaci√≥n.

#### ConfigLoader

Maneja la carga de configuraci√≥n desde archivos personalizados y proporciona configuraci√≥n por defecto.

#### ProjectAnalyzer

Analiza la estructura del proyecto, detecta si es monorepo, identifica zonas y tipos de proyecto.

#### RuleEngine

Motor de validaci√≥n que ejecuta reglas contra archivos y contenido.

#### Reporter

Genera reportes detallados en m√∫ltiples formatos.

#### FileScanner

Utilidad para escanear archivos y directorios con patrones de exclusi√≥n.

#### Logger

Sistema de logging consistente con niveles configurables.

## üìù Reglas por defecto

- **No console.log**: Previene console.log en c√≥digo de producci√≥n
- **No var**: Fuerza uso de let/const en lugar de var
- **No funciones an√≥nimas en callbacks**: Prefiere arrow functions
- **No variables sin usar**: Detecta variables declaradas pero no utilizadas
- **Convenci√≥n de nombres de interfaces**: Interfaces deben empezar con 'I'
- **Estilos inline**: Proh√≠be estilos inline
- **C√≥digo comentado**: Detecta c√≥digo comentado
- **Datos hardcodeados**: Identifica datos hardcodeados
- **Comentarios en funciones complejas**: Requiere documentaci√≥n en funciones complejas
- **Convenciones de nombres**: Valida naming conventions por tipo de archivo

## üìä Resumen de Reglas

La herramienta incluye un total de **60 reglas** organizadas por nivel de severidad:

### üî¥ Reglas de Error (25 total)

_Las reglas de error indican problemas cr√≠ticos que pueden romper el c√≥digo o impedir la compilaci√≥n._

- **Naming**: Nomenclatura de componentes, hooks, tipos, helpers, estilos, assets
- **Content/TypeScript**: No var, no any, no alert, no console.log, no estilos inline
- **Accesibilidad**: Botones con nombres accesibles, inputs con labels
- **React**: Key prop en listas, directivas client component

### üü° Reglas de Warning (19 total)

_Las reglas de warning se√±alan mejores pr√°cticas importantes que deber√≠an seguirse._

- **Structure**: Estructura de carpetas, l√≠mites de tama√±o de componentes
- **React/Performance**: Dependencias de hooks, interfaces para props, evitar React.FC
- **Imports**: Orden de imports, imports absolutos, no imports sin uso

### üîµ Reglas de Info (16 total)

_Las reglas de info proporcionan sugerencias y optimizaciones opcionales._

- **Documentation**: JSDoc para funciones complejas, comentarios TSDoc
- **TypeScript**: Tipos de retorno expl√≠citos, naming de gen√©ricos
- **Performance**: React.memo para componentes puros, imports espec√≠ficos
- **Accessibility**: Nombres accesibles para links, manejo de focus, contraste de color

> **üëâ Para ver la lista completa de reglas detalladas, revisa [rules-list.md](./rules-list.md)**

## üéØ Opciones de CLI

```
Options:
  -z, --zones <zones...>     Zonas espec√≠ficas a verificar
  -c, --config <path>        Ruta a archivo de configuraci√≥n personalizado
  -o, --output <path>        Ruta para archivo de log de salida
  -v, --verbose              Mostrar salida detallada
  --skip-structure           Saltar validaci√≥n de estructura de directorios
  --skip-naming              Saltar validaci√≥n de convenciones de nombres
  --skip-content             Saltar validaci√≥n de contenido
  -h, --help                 Mostrar ayuda
  --version                  Mostrar versi√≥n
```

## üîß Desarrollo

### Agregar nuevas reglas

1. Crea una nueva regla en el `RuleEngine`:

```javascript
// En src/core/rule-engine.js
this.validators.set('my-validator', this.validateMyRule.bind(this));

async validateMyRule(content, filePath) {
  const errors = [];
  // Tu l√≥gica de validaci√≥n aqu√≠
  return errors;
}
```

2. O agrega reglas a trav√©s de configuraci√≥n:

```javascript
// En checkFrontendStandards.config.js
export default {
  rules: [
    {
      name: 'Mi regla personalizada',
      check: (content, filePath) => {
        // L√≥gica de validaci√≥n
        return content.includes('patron-prohibido');
      },
      message: 'Este patr√≥n no est√° permitido'
    }
  ]
};
```

### Agregar nuevos validadores

Los validadores especializados se pueden agregar en `RuleEngine.initializeValidators()`:

```javascript
initializeValidators() {
  // Validadores existentes...
  this.validators.set('mi-validador', this.validateMiRegla.bind(this));
}
```
